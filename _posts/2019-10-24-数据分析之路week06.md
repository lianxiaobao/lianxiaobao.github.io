---
layout:     post
title:      æ•°æ®åˆ†æä¹‹è·¯week06
subtitle:   å½©ç¥¨é¢„æµ‹ï¼Œé€‰å·åˆ†æ
date:       2019-10-18
author:     BY xiaobao(å¾®ä¿¡ï¼šBao1697047283)
header-img: img/post-bg-mi1.jpg
catalog: true
tags:
    - blog
    - æ•°æ®åˆ†æ
    - python
---


#### ç›®å½•
>1. [æ•°æ®çš„æè¿°æ€§ç»Ÿè®¡](https://lianxiaobao.github.io/2019/07/20/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8B%E8%B7%AFweek01/)
2. [pythonåŸºç¡€å­¦ä¹ ](https://lianxiaobao.github.io/2019/07/27/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8B%E8%B7%AFpython%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/)
3. [æ•°æ®çš„åˆ†å¸ƒå½¢æ€æè¿°](https://lianxiaobao.github.io/2019/08/15/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8B%E8%B7%AFweek03/)
4. [ç”¨pythonéªŒè¯æ•°æ®é›†ä¸­çš„ä½“æ¸©æ˜¯å¦æœä»æ­£æ€åˆ†å¸ƒ](https://lianxiaobao.github.io/2019/09/01/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8B%E8%B7%AFweek04/)
5. [æ¢ç´¢æ³°å¦å°¼å…‹å·ç™»èˆ¹æ¸¯å£ä»·æ ¼ä¹‹è°œ](https://lianxiaobao.github.io/2019/09/08/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8B%E8%B7%AFweek05/)
6. [å½©ç¥¨é¢„æµ‹ï¼Œé€‰å·åˆ†æ](https://lianxiaobao.github.io/2019/10/18/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8B%E8%B7%AFweek06/)
7. [æ•°æ®åˆ†æå¯è§†åŒ–supersetå®‰è£…](https://lianxiaobao.github.io/2019/10/18/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8B%E8%B7%AFweek07/)


# å½©ç¥¨é‚£ç‚¹äº‹å„¿

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89o5ogad2j30jo0xsmyb.jpg)
æœ€è¿‘æœ‹å‹çš„ä¸€ä¸ªå°éœ€æ±‚çªç„¶è®©æˆ‘æœ‰äº†è¿™ä¸ªå°æƒ³æ³•ï¼Œè¿™ä¸ªéœ€æ±‚ä¹Ÿèƒ½ç©ä¸€ç©æ•°æ®åˆ†æï¼Œå½“å­¦ä¹ demoï¼Œå½“ç„¶æˆ‘æ²¡ç©è¿‡å½©ç¥¨ï¼Œä¹Ÿä¸æ‡‚ï¼Œçœ‹ç™¾åº¦äº†è§£äº†ä¸€ä¸‹ä¸»è¦æ˜¯ç»ƒä¹ ä»¥ä¸‹å‡ æ–¹é¢ã€‚ã€‚ã€‚ğŸ˜‚

* è„šæœ¬æ•°æ®é›†
* çˆ¬è™«ç»ƒä¹ 
* æ•°æ®å¤„ç†
* å›å½’åˆ†æ
* æè¿°æ€§ç»Ÿè®¡åˆ†æ

ä»£ç éƒ½å·²ä¸Šä¼ **[GitHubç‚¹å‡»æŸ¥çœ‹](https://github.com/lianxiaobao/dataset/tree/master)**

## æ•°æ®åˆ†æåŸºæœ¬æ„ä¹‰

â€“ æ•°æ®åˆ†ææ˜¯æŒ‡ç”¨é€‚å½“çš„ç»Ÿè®¡æ–¹æ³•å¯¹æ”¶é›†æ¥çš„å¤§é‡ç¬¬ä¸€æ‰‹æ•°æ®ï¼ˆèµ„æ–™ï¼‰å’Œç¬¬äºŒæ‰‹æ•°æ®ï¼ˆèµ„æ–™ï¼‰è¿›è¡Œåˆ†æï¼Œä»¥æ±‚æœ€å¤§åŒ–åœ°å¼€å‘æ•°æ®èµ„æ–™çš„åŠŸèƒ½ï¼Œå‘æŒ¥æ•°æ®çš„ä½œç”¨ã€‚æ˜¯ä¸ºäº†æå–æœ‰ç”¨ä¿¡æ¯å’Œå½¢æˆç»“è®ºè€Œå¯¹æ•°æ®åŠ ä»¥è¯¦ç»†ç ”ç©¶å’Œæ¦‚å†µæ€»ç»“çš„è¿‡ç¨‹ã€‚
â€“ åœ¨å®ç”¨ä¸­ï¼Œæ•°æ®åˆ†æå¯å¸®åŠ©äººä»¬ä½œå‡ºåˆ¤æ–­ï¼Œä»¥ä¾¿é‡‡å–é€‚å½“è¡ŒåŠ¨ã€‚

é¦–å…ˆè®²ä¸€ä¸‹æ•°æ®åˆ†æçš„æ•´ä¸ªæ€è·¯ï¼š
## æ•°æ®åˆ†æçš„æ­¥éª¤


![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89osu3n78j31jm0li40g.jpg)

### ç¡®å®šä¸€ä¸‹ç›®çš„

1ã€æ¯ä¸ªå·ç å‡ºç°çš„æ¬¡æ•°æ˜¯ä¸€æ ·çš„å—ï¼Ÿ

2ã€å¾€æœŸæ•°æ®èƒ½é¢„æµ‹ä¸‹ä¸€æœŸçš„å·ç å—ï¼Ÿ

3ã€è¿å·æœ‰ä»€ä¹ˆè§„å¾‹å—ï¼Ÿï¼ˆè¿™ä¸ªæš‚æ—¶æ²¡åšåŸè°…æˆ‘æ‡’äº†ğŸ˜‚ï¼‰

### æ•°æ®å‡†å¤‡
çˆ¬å–å¾€æœŸçš„å½©ç¥¨æ•°æ®ï¼Œç»è¿‡å¯¹æ¯”åå‘ç°è¿™å®¶æ•°æ®å®Œæ•´ä¹Ÿç‰¹åˆ«å¥½çˆ¬ï¼Œå¯¹æ¯”è¿‡**[é‡åº†æ—¶æ—¶å½©](https://kaijiang.aicai.com/cqssc/)**ä»–å±…ç„¶æ”¯æŒç›´æ¥å¯¼å‡ºæ•°æ®ã€‚ã€‚ã€‚ä¸å¼€å¿ƒã€‚ã€‚æ²¡æœ‰çˆ¬æ•°æ®çš„å¿«æ„Ÿã€‚ã€‚ã€‚


![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8aa3ghxsqj30ji04i0sm.jpg)


æœ€åé€‰æ‹©
<http://datachart.500.com/dlt/history/history.shtml>

#### åˆ†æé¡µé¢ï¼š

 * è¿›å…¥f12è¾“å…¥0æŸ¥æ‰¾ æŸ¥çœ‹ç›¸åº”è§„å¾‹çˆ¬å–å¾€æœŸæ•°æ®

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89o0w9js4j31h40u0ahs.jpg)

  
 * å¯¹é¡µé¢è¿›ä¸€æ­¥è·å–htmlå…ƒç´ ï¼Œåˆ†æé¡µé¢ç»„æˆ

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89qlgdzarj31ep0u0h0n.jpg)

*  pythonè„šæœ¬ çˆ¬å–å†å²æ•°æ®

```python

import requests
from lxml import etree
import pandas as pd


def get_ten_years_data(url):
    headers={
        'accept-encoding': 'gzip, deflate, br',
        'accept-language': 'zh-CN,zh;q=0.9,en;q=0.8',
        'User-Agent':'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36'

    }

    response=requests.get(url, headers=headers)
    if response.status_code == 200:
        return response.text
    return None


url="http://datachart.500.com/dlt/history/newinc/history.php?start=00001&end=19119";
# print(get_ten_years_data(url))
data = etree.HTML(get_ten_years_data(url))
# print(data)
trs = data.xpath('//tr')
k=0
for tr in trs:
    k=k+1
print(k)


requests =[]
for i in range(1, k-3):

    result_num = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[1]/text()')[0]
    print(result_num, end='\t')
    resrult_bef1 = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[2]/text()')[0]
    print(resrult_bef1, end='\t')
    resrult_bef2 = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[3]/text()')[0]
    print(resrult_bef2, end='\t')
    resrult_bef3 = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[4]/text()')[0]
    print(resrult_bef3, end='\t')
    resrult_bef4 = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[5]/text()')[0]
    print(resrult_bef4, end='\t')
    resrult_bef5 = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[6]/text()')[0]
    print(resrult_bef5, end='\t')
    resrult_beh1 = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[7]/text()')[0]
    print(resrult_beh1, end='\t')
    resrult_beh2 = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[8]/text()')[0]
    print(resrult_beh2, end='\t')
    prize_pool = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[9]/text()')[0]
    print(prize_pool, end='\t')
    first_prize_size = data.xpath('//*[@id="tdata"]/tr[' + str(i) + ']/td[10]/text()')[0]
    print(first_prize_size, end='\t')
    first_prize = data.xpath('//*[@id="tdata"]/tr[' + str(i) + ']/td[11]/text()')[0]
    print(first_prize, end='\t')
    second_prize_size = data.xpath('//*[@id="tdata"]/tr[' + str(i) + ']/td[12]/text()')[0]
    print(second_prize_size, end='\t')
    second_prize = data.xpath('//*[@id="tdata"]/tr[' + str(i) + ']/td[13]/text()')[0]
    print(second_prize, end='\t')
    total_bet_amount = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[14]/text()')[0]
    print(total_bet_amount, end='\t')
    result_day = data.xpath('//*[@id="tdata"]/tr['+str(i)+']/td[15]/text()')[0]
    print(result_day, end='\t')


    print(i)

    pos ={
        'result_num': result_num,
        'resrult_bef1': resrult_bef1,
        'resrult_bef2': resrult_bef2,
        'resrult_bef3': resrult_bef3,
        'resrult_bef4': resrult_bef4,
        'resrult_bef5': resrult_bef5,
        'resrult_beh1': resrult_beh1,
        'resrult_beh2': resrult_beh2,
        'prize_pool': prize_pool,
        'first_prize_size': first_prize_size,
        'first_prize': first_prize,
        'second_prize_size': second_prize_size,
        'second_prize': second_prize,
        'total_bet_amount': total_bet_amount,
        'result_day': result_day,
    }
    requests.append(pos)
    # print(requests)

df = pd.DataFrame(requests)
df.to_csv('/Users/lianxiaobao/lianxiaobao/bigdatabook/daletou.csv', mode='a')

```

* å°†æ•°æ®ä¿å­˜åˆ°äº†æˆ‘çš„supersetä¸­å±•ç¤ºæ–¹ä¾¿æ—¥åå¤šç»´åˆ†æå±•ç¤ºï¼Œè¯¥è¡¨æ ¼å½“ç„¶æ²¡æœ‰åšå¤„ç†åªæ˜¯`select *..`

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89szi21cjj31qd0u0jy1.jpg)


### èƒ½é¢„æµ‹ä¸‹ä¸€æœŸå—ï¼Ÿ


* å¯¼åŒ…

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.metrics import r2_score
import statsmodels.api as sm
```

* æ¦‚è§ˆæ•°æ®


```python
data = pd.read_csv('/Users/lianxiaobao/lianxiaobao/bigdatabook/daletou.csv')
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>first_prize</th>
      <th>first_prize_size</th>
      <th>prize_pool</th>
      <th>resrult_bef1</th>
      <th>resrult_bef2</th>
      <th>resrult_bef3</th>
      <th>resrult_bef4</th>
      <th>resrult_bef5</th>
      <th>resrult_beh1</th>
      <th>resrult_beh2</th>
      <th>result_day</th>
      <th>result_num</th>
      <th>second_prize</th>
      <th>second_prize_size</th>
      <th>total_bet_amount</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>10,000,000</td>
      <td>4</td>
      <td>2,450,995,411</td>
      <td>3</td>
      <td>6</td>
      <td>9</td>
      <td>23</td>
      <td>34</td>
      <td>2</td>
      <td>11</td>
      <td>2019/10/19</td>
      <td>19119</td>
      <td>611,893</td>
      <td>83</td>
      <td>296,906,555</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>10,000,000</td>
      <td>2</td>
      <td>2,505,219,109</td>
      <td>2</td>
      <td>3</td>
      <td>13</td>
      <td>19</td>
      <td>26</td>
      <td>2</td>
      <td>3</td>
      <td>2019/10/16</td>
      <td>19118</td>
      <td>406,469</td>
      <td>101</td>
      <td>272,734,633</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>10,000,000</td>
      <td>4</td>
      <td>2,510,705,016</td>
      <td>1</td>
      <td>18</td>
      <td>21</td>
      <td>25</td>
      <td>35</td>
      <td>7</td>
      <td>8</td>
      <td>2019/10/14</td>
      <td>19117</td>
      <td>806,808</td>
      <td>66</td>
      <td>271,077,215</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>10,000,000</td>
      <td>4</td>
      <td>2,540,591,129</td>
      <td>2</td>
      <td>10</td>
      <td>16</td>
      <td>21</td>
      <td>23</td>
      <td>2</td>
      <td>12</td>
      <td>2019/10/12</td>
      <td>19116</td>
      <td>770,679</td>
      <td>87</td>
      <td>297,819,968</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>10,000,000</td>
      <td>6</td>
      <td>2,576,114,778</td>
      <td>1</td>
      <td>18</td>
      <td>21</td>
      <td>28</td>
      <td>32</td>
      <td>5</td>
      <td>12</td>
      <td>2019/10/9</td>
      <td>19115</td>
      <td>498,979</td>
      <td>105</td>
      <td>286,493,206</td>
    </tr>
  </tbody>
</table>
</div>


```python
data.columns
```




    Index(['Unnamed: 0', 'first_prize', 'first_prize_size', 'prize_pool',
           'resrult_bef1', 'resrult_bef2', 'resrult_bef3', 'resrult_bef4',
           'resrult_bef5', 'resrult_beh1', 'resrult_beh2', 'result_day',
           'result_num', 'second_prize', 'second_prize_size', 'total_bet_amount'],
          dtype='object')




* ç®€å•çº¿æ€§å›å½’
 
   * æ¨¡å‹

     * å¯¹äºç®€å•çš„çº¿æ€§å›å½’ï¼Œåªè€ƒè™‘æ¬¡æ•°çš„å½±å“ã€‚åœ¨ç›´æ¥è¿›å…¥å»ºæ¨¡ä¹‹å‰ï¼Œçœ‹ä¸€ä¸‹æ•°æ®çš„æ ·å­ã€‚

     * ä½¿ç”¨matplotlib ä¸€ä¸ªPythonç»˜å›¾åº“æ¥åˆ¶ä½œæ•£ç‚¹å›¾ã€‚

>å‰åŒºçš„ä¸€ä¸ªçƒå¯èƒ½å‡ºç°çš„æ•°å­—å’Œæ¬¡æ•°çš„æ•£ç‚¹å›¾  

```python
plt.figure(figsize=(16, 8))
plt.scatter(
    data['result_day'],
    data['resrult_bef1'],
    c='black'
)
plt.xlabel("daletou open day(d)")
plt.ylabel("bef1 (num)")
plt.show()
```


![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89srhpbm8j30q80dft8s.jpg)


>ååŒºçš„ä¸€ä¸ªçƒå¯èƒ½å‡ºç°çš„æ•°å­—å’Œæ¬¡æ•°çš„æ•£ç‚¹å›¾  

```python
plt.figure(figsize=(16, 8))
plt.scatter(
    data['result_day'],
    data['resrult_beh1'],
    c='black'
)
plt.xlabel("daletou open day(d)")
plt.ylabel("bef1 (num)")
plt.show()
```


![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89srhaeigj30q80dfdfu.jpg)


#### ç”Ÿæˆç®€å•å›å½’çº¿å›¾å½¢æ–¹æ³•ä¸€


* å‡è®¾æ¬¡æ•°å’Œå·ç æ•°æœ‰å…³è”
	* ç”Ÿæˆè¿‘ä¼¼å‡½æ•° 


```python
X = data['Unnamed: 0'].values.reshape(-1,1)
y = data['resrult_bef1'].values.reshape(-1,1)
reg = LinearRegression()
reg.fit(X, y)
print(reg.coef_[0][0])
print(reg.intercept_[0])
```

    0.0007193466601768446
    5.6506553914011715



```python
print("The huigui model is: Y = {:.6} + {:.6}X".format(reg.intercept_[0], reg.coef_[0][0]))
```

    The huigui model is: Y = 5.65066 + 0.000719347X


* ç”Ÿæˆç®€å•å›å½’çº¿å›¾å½¢

```python
predictions = reg.predict(X)
plt.figure(figsize=(16, 8))
plt.scatter(
    data['Unnamed: 0'],
    data['resrult_bef1'],
    c='black'
)
plt.plot(
    data['Unnamed: 0'],
    predictions,
    c='blue',
    linewidth=4
)
plt.xlabel("daletou open day(d)")
plt.ylabel("bef1 (num)")
plt.show()
```


![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89srguaizj30q80dfq31.jpg)


#### ç”Ÿæˆç®€å•å›å½’çº¿å›¾å½¢æ–¹æ³•äºŒ


```python
X = data['Unnamed: 0']
y = data['resrult_bef1']
X2 = sm.add_constant(X)
model = sm.OLS(y, X2)
result = model.fit()

result.params
```




    const         5.650655
    Unnamed: 0    0.000719
    dtype: float64




```python
print(result2.summary())
```

                                OLS Regression Results                            
    ==============================================================================
    Dep. Variable:           resrult_bef1   R-squared:                       0.006
    Model:                            OLS   Adj. R-squared:                  0.006
    Method:                 Least Squares   F-statistic:                     11.54
    Date:                Thu, 24 Oct 2019   Prob (F-statistic):           0.000696
    Time:                        19:20:31   Log-Likelihood:                -5781.4
    No. Observations:                1901   AIC:                         1.157e+04
    Df Residuals:                    1899   BIC:                         1.158e+04
    Df Model:                           1                                         
    Covariance Type:            nonrobust                                         
    ==============================================================================
                     coef    std err          t      P>|t|      [0.025      0.975]
    ------------------------------------------------------------------------------
    const          5.6507      0.232     24.319      0.000       5.195       6.106
    Unnamed: 0     0.0007      0.000      3.397      0.001       0.000       0.001
    ==============================================================================
    Omnibus:                      388.306   Durbin-Watson:                   2.003
    Prob(Omnibus):                  0.000   Jarque-Bera (JB):              695.987
    Skew:                           1.275   Prob(JB):                    7.38e-152
    Kurtosis:                       4.510   Cond. No.                     2.19e+03
    ==============================================================================
    
    Warnings:
    [1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
    [2] The condition number is large, 2.19e+03. This might indicate that there are
    strong multicollinearity or other numerical problems.



```python
# ä¸­é—´åä¸‹çš„ coef åˆ—å°±æ˜¯è®¡ç®—å‡ºçš„å›å½’ç³»æ•°ã€‚
# æˆ‘ä»¬è¿˜å¯ä»¥å°†æ‹Ÿåˆç»“æœç”»å‡ºæ¥ã€‚å…ˆè°ƒç”¨æ‹Ÿåˆç»“æœçš„ fittedvalues å¾—åˆ°æ‹Ÿåˆçš„ y å€¼ã€‚
y_fitted = result.fittedvalues

# ç„¶åä½¿ç”¨ matplotlib.pyploft ç”»å›¾ã€‚é¦–å…ˆè®¾å®šå›¾è½´ï¼Œå›¾ç‰‡å¤§å°ä¸º 16Ã—8ã€‚
fig, ax = plt.subplots(figsize=(16,8))

# ç”»å‡ºåŸæ•°æ®ï¼Œå›¾åƒä¸ºåœ†ç‚¹ï¼Œé»˜è®¤é¢œè‰²ä¸ºè“ã€‚
ax.plot(X, y, 'o', label='data')

# ç”»å‡ºæ‹Ÿåˆæ•°æ®ï¼Œå›¾åƒä¸ºçº¢è‰²å¸¦ç‚¹é—´æ–­çº¿ã€‚
ax.plot(X, y_fitted, 'r--.',label='OLS')

# æ”¾ç½®æ³¨è§£ã€‚
ax.legend(loc='best')
```



![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89srgey4cj30pu0d1t8s.jpg)


#### ç”Ÿæˆç®€å•å›å½’çº¿å›¾å½¢æ–¹æ³•ä¸‰

* ç®€å•æš´åŠ›ç›´æ¥ä¸Šexcleç¥å™¨

1ã€é¦–å…ˆä½ è¦æœ‰æ•°æ®åˆ†æåŠŸèƒ½
 
 ![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89ts7rzm1j31180u0asr.jpg)
 
 ![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89ts8y00xj31d10u0wj2.jpg)
 
2ã€å¼€å§‹happy

* 1


![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89tvfefahj31w00qan3m.jpg)

* 2

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89tz3uf48j31nt0u07c3.jpg)

* 3

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g89tz6jbpgj31bc0u0tmc.jpg)


#### å›å½’å‚æ•°è§£é‡Š


```
                            OLS Regression Results                            
==============================================================================
Dep. Variable:           resrult_bef1   R-squared:                       0.006
Model:                            OLS   Adj. R-squared:                  0.006
Method:                 Least Squares   F-statistic:                     11.54
Date:                Thu, 24 Oct 2019   Prob (F-statistic):           0.000696
Time:                        19:20:31   Log-Likelihood:                -5781.4
No. Observations:                1901   AIC:                         1.157e+04
Df Residuals:                    1899   BIC:                         1.158e+04
Df Model:                           1                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P>|t|      [0.025      0.975]
------------------------------------------------------------------------------
const          5.6507      0.232     24.319      0.000       5.195       6.106
Unnamed: 0     0.0007      0.000      3.397      0.001       0.000       0.001
==============================================================================
Omnibus:                      388.306   Durbin-Watson:                   2.003
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              695.987
Skew:                           1.275   Prob(JB):                    7.38e-152
Kurtosis:                       4.510   Cond. No.                     2.19e+03
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 2.19e+03. This might indicate that there are
strong multicollinearity or other numerical problems.
```



* å·¦è¾¹ï¼šï¼ˆæ¨¡å‹èƒŒæ™¯æè¿°ï¼‰
	* Dep.Variable: è¾“å‡ºå˜é‡çš„åç§°
	* Model :æ¨¡å‹åç§°
	* Method: æ–¹æ³• å…¶ä¸­ Least Squares è¡¨ç¤ºæœ€å°äºŒä¹˜æ³•
	* Dateï¼š æ—¥æœŸ
	* Timeï¼š æ—¶é—´
	* No.Observations: æ ·æœ¬æ•°ç›®
	* Df Residuals : æ®‹å·®è‡ªç”±åº¦ (è§‚æµ‹æ•°No.Observations - (å‚æ•°æ•°ç›®Df Model+1å¸¸æ•°))

       * â€“æ®‹å·®ä»£è¡¨çš„æ˜¯å®é™…è§‚å¯Ÿå€¼ä¸ä¼°è®¡å€¼çš„å·®
   * Df Model: æ¨¡å‹å‚æ•°ä¸ªæ•°ï¼Œç›¸å½“äºè¾“å…¥çš„Xçš„å…ƒç´ ä¸ªæ•°

* å³è¾¹ï¼šï¼ˆæ¨¡å‹è´¨é‡æè¿°ï¼‰ï¼ˆéœ€è¦å‚è€ƒåˆ¤æ–­çš„æ•°æ®ï¼‰
	* R- squared : å¯å†³ç³»æ•°ï¼Œç”¨æ¥åˆ¤æ–­ä¼°è®¡çš„å‡†ç¡®æ€§ï¼ŒèŒƒå›´åœ¨ [0,1] çº¦æ¥è¿‘1 ï¼Œè¯´æ˜å¯¹yçš„è§£é‡Šèƒ½åŠ›è¶Šå¼ºï¼Œæ‹Ÿåˆè¶Šå¥½

	* Adj-R- squared: é€šè¿‡æ ·æœ¬æ•°é‡ä¸æ¨¡å‹æ•°é‡å¯¹R-squaredè¿›è¡Œä¿®æ­£ï¼Œå¥¥å¡å§†å‰ƒåˆ€åŸç†ï¼Œé¿å…æè¿°å†—æ‚
	* F-statistic : è¡¡é‡æ‹Ÿåˆçš„æ˜¾è‘—æ€§, é‡è¦ç¨‹åº¦ã€‚æ¨¡å‹çš„å‡æ–¹è¯¯å·®é™¤ä»¥æ®‹å·®çš„å‡æ–¹è¯¯å·®,å€¼è¶Šå¤§,H0 è¶Šä¸å¯èƒ½
	* Prob(F-statistic): å½“probï¼ˆF-statisticï¼‰<Î±æ—¶ï¼Œè¡¨ç¤ºæ‹’ç»åŸå‡è®¾ï¼Œå³è®¤ä¸ºæ¨¡å‹æ˜¯æ˜¾è‘—çš„ï¼›
		* å½“probï¼ˆF-statisticï¼‰>Î±æ—¶ï¼Œè¡¨ç¤ºæ¥å—åŸå‡è®¾ï¼Œå³è®¤ä¸ºæ¨¡å‹ä¸æ˜¯æ˜¾è‘—çš„

	* Log likelihood ï¼ˆå¯¹æ•°ä¼¼ç„¶æ¯”LLRï¼‰ :(å¾ˆå¤šè¯´æ³•æ˜¯å€¼è¶Šå¤§ï¼Œè¯´æ˜æ¨¡å‹æ‹Ÿåˆçš„è¾ƒå¥½)(ä½†æœ‰å¾…è€ƒå¯Ÿ,ä¼¼ç„¶æ¯”æœä»ç»Ÿè®¡é‡,å¤§äºå¡æ–¹ä¸´ç•Œå€¼æ‹’ç»åŸå‡è®¾)
é€šè¿‡æœ€å¤§ä¼¼ç„¶ä¼°è®¡å‚æ•°çš„é€‰å–çš„æ‹Ÿåˆæ€§
ï¼ˆDavidson ä¸MacKinnon(1993)å¹´è¯´ï¼šå¯¹äºçº¿æ€§å›å½’æ¨¡å‹ï¼Œä¸ç®¡å®ƒè¯¯å·®æ˜¯ä¸æ˜¯æ­£æ€åˆ†å¸ƒï¼Œéƒ½ä¸éœ€è¦è¿‡é—®LMï¼ŒWï¼ŒLLRï¼Œå› ä¸ºè¿™äº›ä¿¡æ¯å·²è¢«Fæ£€éªŒæ‰€å«æœ‰ï¼‰
	* AIC: AICå¯ä»¥è¡¨ç¤ºä¸ºï¼š AIC=2k-2ln(L) å…¶ä¸­ï¼škæ˜¯å‚æ•°çš„æ•°é‡ï¼ŒLæ˜¯ä¼¼ç„¶å‡½æ•°ã€‚ è¡¡é‡æ‹Ÿåˆä¼˜è‰¯æ€§,é€‰æ‹©AIC æœ€å°çš„æ¨¡å‹, å¼•å…¥äº†æƒ©ç½šé¡¹,é¿å…å‚æ•°è¿‡å¤š,è¿‡æ‹Ÿåˆ
	* BIC: è´å¶æ–¯ä¿¡æ¯å‡†åˆ™ BIC=kln(n)-2ln(L) ,BICç›¸æ¯”AICåœ¨å¤§æ•°æ®é‡æ—¶å¯¹æ¨¡å‹å‚æ•°æƒ©ç½šå¾—æ›´å¤šï¼Œå¯¼è‡´BICæ›´å€¾å‘äºé€‰æ‹©å‚æ•°å°‘çš„ç®€å•æ¨¡å‹ã€‚

* ä¸‹åŠéƒ¨åˆ†:(æ¨¡å‹æè¿°)
	* coef: ç³»æ•° constè¡¨ç¤ºå¸¸æ•°é¡¹
	* std err :ç³»æ•°ä¼°è®¡çš„åŸºæœ¬æ ‡å‡†è¯¯å·®
	* t : t ç»Ÿè®¡å€¼,è¡¡é‡ç³»æ•°ç»Ÿè®¡æ˜¾è‘—ç¨‹åº¦çš„æŒ‡æ ‡
	* P>|t| : ç³»æ•°= 0çš„é›¶å‡è®¾ä¸ºçœŸçš„På€¼ã€‚å¦‚æœå®ƒå°äºç½®ä¿¡æ°´å¹³ï¼Œé€šå¸¸ä¸º0.05ï¼Œåˆ™è¡¨æ˜è¯¥æœ¯è¯­ä¸å“åº”ä¹‹é—´å­˜åœ¨ç»Ÿè®¡ä¸Šæ˜¾ç€çš„å…³ç³»ã€‚åº¦çš„æŒ‡æ ‡
[0.025,0.975]: 95ï¼…ç½®ä¿¡åŒºé—´çš„ä¸‹é™å’Œä¸Šé™å€¼

	* Omnibus :å±äºä¸€ç§ç»Ÿè®¡æµ‹éªŒ,æµ‹è¯•ä¸€ç»„æ•°æ®ä¸­å·²è§£é‡Šæ–¹å·®æ˜¯å¦æ˜¾è‘—å¤§äºæœªè§£é‡Šæ–¹å·®,ä½†omnibusä¸æ˜¾è‘—,æ¨¡å‹ä¹Ÿå¯èƒ½å­˜åœ¨åˆæ³•çš„æ˜¾è‘—å½±å“, æ¯”å¦‚ä¸¤ä¸ªå˜é‡ä¸­æœ‰ä¸€ä¸ªä¸æ˜¾è‘—,å³ä¾¿å¦ä¸€ä¸ªæ˜¾è‘—.é€šå¸¸ç”¨äºå¯¹æ¯”
	* Prob(Omnibus):å°†ä¸Šé¢çš„ç»Ÿè®¡æ•°æ®å˜æˆæ¦‚ç‡
	* Durbin-Watson : æ®‹å·®æ˜¯å¦ç¬¦åˆæ­£æ€åˆ†å¸ƒ,åœ¨2å·¦å³è¯´æ˜æ˜¯æœä»æ­£æ€åˆ†å¸ƒçš„,åç¦»2å¤ªè¿œ,è§£é‡Šèƒ½åŠ›å—å½±å“
æ˜¯å¦è‡ªç›¸å…³, å—åˆ°å‰åå½±å“ ,ä¸è¡¨ä¸­ä¸Šé™è¿›è¡Œæ¯”è¾ƒ,å¦‚æœD>ä¸Šé™ ä¸å­˜åœ¨ç›¸å…³æ€§ .
D<ä¸‹é™ å­˜åœ¨æ­£ç›¸å…³æ€§,åœ¨ä¸Šä¸‹é™ä¹‹é—´,æ— æ³•å¾—å‡ºç»“è®º
	* Skewness: ååº¦, å…³äºå¹³å‡å€¼çš„æ•°æ®å¯¹ç§°æ€§çš„åº¦é‡ã€‚æ­£æ€åˆ†å¸ƒè¯¯å·®åº”æ˜¯å…³äºå¹³å‡å€¼å¯¹ç§°çš„åˆ†å¸ƒã€‚
	* Kurtosis: å³°åº¦, åˆ†å¸ƒå½¢çŠ¶çš„é‡åº¦,æ¯”è¾ƒæ¥è¿‘å‡å€¼ä¸è¿œç¦»å‡å€¼çš„æ•°æ®é‡ å¦‚æœå¤§äºä¸‰,è¯´æ˜å³°çš„å½¢çŠ¶æ¯”è¾ƒé™¡å³­,å½¢çŠ¶è¾ƒå°–
æ­£æ€åˆ†å¸ƒçš„å³°åº¦ï¼ˆç³»æ•°ï¼‰ä¸ºå¸¸æ•°3ï¼Œå‡åŒ€åˆ†å¸ƒçš„å³°åº¦ï¼ˆç³»æ•°ï¼‰ä¸ºå¸¸æ•°1.8
	* Jarque-Bera(JB) : Jarqueâ€“Beraæ£€éªŒæ˜¯å¯¹æ ·æœ¬æ•°æ®æ˜¯å¦å…·æœ‰ç¬¦åˆæ­£æ€åˆ†å¸ƒçš„ååº¦å’Œå³°åº¦çš„æ‹Ÿåˆä¼˜åº¦çš„æ£€éªŒã€‚
å…¶ç»Ÿè®¡æµ‹è¯•ç»“æœæ€»æ˜¯éè´Ÿçš„ã€‚å¦‚æœç»“æœè¿œå¤§äºé›¶ï¼Œåˆ™è¡¨ç¤ºæ•°æ®ä¸å…·æœ‰æ­£æ€åˆ†å¸ƒã€‚
	* Prob(JB): ä¸Šé¢ç»Ÿè®¡é‡çš„æ¦‚ç‡å½¢å¼
	* Cond. No :å¤šé‡å…±çº¿æ€§æµ‹è¯•(å¦‚æœå¤šä¸ªå‚æ•°,è¿™äº›å‚æ•°æ˜¯å¦ç›¸äº’å…³è”)

**ä»ç®€å•çº¿æ€§å›¾å¯ä»¥çœ‹å‡ºä¸€ä¸ªçƒçš„é¢„æµ‹éƒ½å¾ˆéšæœºï¼Œä»å›¾ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºä»æ•°æ®å‘æè¿°æ€§ç»Ÿè®¡æ›´èƒ½ä½“ç°æ•°æ®ç‰¹å¾ æƒ³å…¨ä¸­ å¤ªéš¾äº†**


### æ¯ä¸ªå·ç å‡ºç°çš„æ¬¡æ•°æ˜¯ä¸€æ ·çš„å—ï¼Ÿ

#### æ¸…æ´—æ•°æ®

æƒ³è¦çœ‹ä¸€ä¸‹è¿‘å¹´æ¥å¥–é‡‘æ± ï¼ŒæŠ¼æ³¨é¢çš„å˜åŒ–ä½†æ˜¯å‘ç°æ•°æ®è¿˜æ˜¯æœ‰é—®é¢˜æœ‰é€—å·çš„å­˜åœ¨

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8b2813zumj31ey0p0ju7.jpg)



```python

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import re
import csv

data = pd.read_csv('/Users/lianxiaobao/lianxiaobao/bigdatabook/daletou2.csv')
# data = pd.read_csv('/Users/lianxiaobao/lianxiaobao/bigdatabook/daletou2.csv' ,usecols=[3,11])
# print(data.head())

print(int(data.describe().ix[0,0]))
record_num = data.__len__()
print(record_num)
print(data.ix[0, :])

# éå†å‡ºæ‰€æœ‰è¡Œ
# for i in range(record_num):
#     record = data.ix[i, :]
#     # re.sub(r'[^\w\s]', '',s) å»é™¤é€—å·
#     print(re.sub(r'[^\w\s]', '', str(record['prize_pool'])))
#     print(re.sub(r'[-]', '', str(record['result_day'])))

# å»é™¤ç¬¦å·
def convert1(record):
    record = re.sub(r'[^\w\s]', '', str(record))
    return record

# å»é™¤ -
def convert2(record):
    record = re.sub(r'[-]', '', str(record))
    return record

#å»ºæ–°csvæ–‡ä»¶
path = r'/Users/lianxiaobao/lianxiaobao/bigdatabook/daletou4.csv'
csvfile = open(path, 'w', encoding='utf-8')
writer = csv.writer(csvfile)
writer.writerow(('Unnamed: 0','result_num', 'resrult_bef1', 'resrult_bef2', 'resrult_bef3', 'resrult_bef4',
       'resrult_bef5', 'resrult_beh1', 'resrult_beh2','prize_pool', 'first_prize_size', 'first_prize','second_prize_size',
        'second_prize', 'result_day','total_bet_amount'))

for i in range(record_num):
    record = data.ix[i, :]
    first_prize = int(convert1(record['first_prize']))
    prize_pool = int(convert1(record['prize_pool']))
    second_prize = int(convert1(record['second_prize']))
    # æ—¶é—´ç±»å‹ä¿æŒä¸å˜å°±å¥½ å»æ‰-åˆ†éš”ç¬¦ä¼šå¯¼è‡´pyç”»å›¾ç¨€ç–
    # result_day = int(convert1(record['result_day']))
    total_bet_amount = int(convert1(record['total_bet_amount']))

    writer.writerow((record['Unnamed: 0'], record['result_num'], record['resrult_bef1'], record['resrult_bef2'],
                     record['resrult_bef3'], record['resrult_bef4'], record['resrult_bef5'], record['resrult_beh1'], record['resrult_beh2']
                     , prize_pool, record['first_prize_size'], first_prize, record['second_prize_size'], second_prize, record['result_day'],
                     total_bet_amount))
csvfile.close()


```


#### æè¿°æ€§ç»Ÿè®¡åˆ†æ



```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.pyplot import MultipleLocator
from sklearn.linear_model import LinearRegression
from sklearn.metrics import r2_score
import statsmodels.api as sm
import matplotlib.ticker as ticker
```


```python
data = pd.read_csv('/Users/lianxiaobao/lianxiaobao/bigdatabook/daletou4.csv')
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>result_num</th>
      <th>resrult_bef1</th>
      <th>resrult_bef2</th>
      <th>resrult_bef3</th>
      <th>resrult_bef4</th>
      <th>resrult_bef5</th>
      <th>resrult_beh1</th>
      <th>resrult_beh2</th>
      <th>prize_pool</th>
      <th>first_prize_size</th>
      <th>first_prize</th>
      <th>second_prize_size</th>
      <th>second_prize</th>
      <th>result_day</th>
      <th>total_bet_amount</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>19119</td>
      <td>3</td>
      <td>6</td>
      <td>9</td>
      <td>23</td>
      <td>34</td>
      <td>2</td>
      <td>11</td>
      <td>2450995411</td>
      <td>4</td>
      <td>10000000</td>
      <td>83</td>
      <td>611893</td>
      <td>2019-10-19</td>
      <td>296906555</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>19118</td>
      <td>2</td>
      <td>3</td>
      <td>13</td>
      <td>19</td>
      <td>26</td>
      <td>2</td>
      <td>3</td>
      <td>2505219109</td>
      <td>2</td>
      <td>10000000</td>
      <td>101</td>
      <td>406469</td>
      <td>2019-10-16</td>
      <td>272734633</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>19117</td>
      <td>1</td>
      <td>18</td>
      <td>21</td>
      <td>25</td>
      <td>35</td>
      <td>7</td>
      <td>8</td>
      <td>2510705016</td>
      <td>4</td>
      <td>10000000</td>
      <td>66</td>
      <td>806808</td>
      <td>2019-10-14</td>
      <td>271077215</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>19116</td>
      <td>2</td>
      <td>10</td>
      <td>16</td>
      <td>21</td>
      <td>23</td>
      <td>2</td>
      <td>12</td>
      <td>2540591129</td>
      <td>4</td>
      <td>10000000</td>
      <td>87</td>
      <td>770679</td>
      <td>2019-10-12</td>
      <td>297819968</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>19115</td>
      <td>1</td>
      <td>18</td>
      <td>21</td>
      <td>28</td>
      <td>32</td>
      <td>5</td>
      <td>12</td>
      <td>2576114778</td>
      <td>6</td>
      <td>10000000</td>
      <td>105</td>
      <td>498979</td>
      <td>2019-10-09</td>
      <td>286493206</td>
    </tr>
  </tbody>
</table>
</div>



* è¾“å‡ºæ•´ä½“æ•°æ®æè¿°

```python
data.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>result_num</th>
      <th>resrult_bef1</th>
      <th>resrult_bef2</th>
      <th>resrult_bef3</th>
      <th>resrult_bef4</th>
      <th>resrult_bef5</th>
      <th>resrult_beh1</th>
      <th>resrult_beh2</th>
      <th>prize_pool</th>
      <th>first_prize_size</th>
      <th>first_prize</th>
      <th>second_prize_size</th>
      <th>second_prize</th>
      <th>total_bet_amount</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1901.000000</td>
      <td>1901.000000</td>
      <td>1901.000000</td>
      <td>1901.000000</td>
      <td>1901.000000</td>
      <td>1901.000000</td>
      <td>1901.000000</td>
      <td>1901.000000</td>
      <td>1901.000000</td>
      <td>1.901000e+03</td>
      <td>1901.000000</td>
      <td>1.901000e+03</td>
      <td>1901.000000</td>
      <td>1.901000e+03</td>
      <td>1.901000e+03</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>950.000000</td>
      <td>13157.299316</td>
      <td>6.334035</td>
      <td>12.648606</td>
      <td>19.103104</td>
      <td>24.941610</td>
      <td>30.576013</td>
      <td>4.403472</td>
      <td>8.760126</td>
      <td>1.596303e+09</td>
      <td>2.720147</td>
      <td>6.047543e+06</td>
      <td>56.155708</td>
      <td>2.142114e+05</td>
      <td>1.307569e+08</td>
    </tr>
    <tr>
      <th>std</th>
      <td>548.915749</td>
      <td>3592.956887</td>
      <td>5.081384</td>
      <td>6.333922</td>
      <td>6.561362</td>
      <td>6.014566</td>
      <td>4.401332</td>
      <td>2.707255</td>
      <td>2.674698</td>
      <td>2.090622e+09</td>
      <td>5.143986</td>
      <td>4.034354e+06</td>
      <td>82.276709</td>
      <td>2.759933e+05</td>
      <td>7.284895e+07</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>7001.000000</td>
      <td>1.000000</td>
      <td>2.000000</td>
      <td>3.000000</td>
      <td>4.000000</td>
      <td>12.000000</td>
      <td>1.000000</td>
      <td>2.000000</td>
      <td>0.000000e+00</td>
      <td>0.000000</td>
      <td>0.000000e+00</td>
      <td>1.000000</td>
      <td>3.000000e+03</td>
      <td>1.579569e+07</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>475.000000</td>
      <td>10076.000000</td>
      <td>2.000000</td>
      <td>8.000000</td>
      <td>14.000000</td>
      <td>21.000000</td>
      <td>29.000000</td>
      <td>2.000000</td>
      <td>7.000000</td>
      <td>1.030280e+08</td>
      <td>0.000000</td>
      <td>0.000000e+00</td>
      <td>22.000000</td>
      <td>8.726500e+04</td>
      <td>6.274881e+07</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>950.000000</td>
      <td>13090.000000</td>
      <td>5.000000</td>
      <td>12.000000</td>
      <td>19.000000</td>
      <td>26.000000</td>
      <td>32.000000</td>
      <td>4.000000</td>
      <td>9.000000</td>
      <td>2.883201e+08</td>
      <td>1.000000</td>
      <td>6.993911e+06</td>
      <td>40.000000</td>
      <td>1.524690e+05</td>
      <td>1.088826e+08</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1425.000000</td>
      <td>16105.000000</td>
      <td>9.000000</td>
      <td>17.000000</td>
      <td>24.000000</td>
      <td>30.000000</td>
      <td>34.000000</td>
      <td>6.000000</td>
      <td>11.000000</td>
      <td>3.252308e+09</td>
      <td>3.000000</td>
      <td>1.000000e+07</td>
      <td>68.000000</td>
      <td>2.359460e+05</td>
      <td>1.951219e+08</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1900.000000</td>
      <td>19119.000000</td>
      <td>30.000000</td>
      <td>32.000000</td>
      <td>33.000000</td>
      <td>34.000000</td>
      <td>35.000000</td>
      <td>11.000000</td>
      <td>12.000000</td>
      <td>7.368392e+09</td>
      <td>106.000000</td>
      <td>2.056120e+07</td>
      <td>2251.000000</td>
      <td>5.000000e+06</td>
      <td>3.172321e+08</td>
    </tr>
  </tbody>
</table>
</div>


* å¤§å®¶å¯¹åŒè‰²çƒçš„çƒ­æƒ…æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ


```python

# plt.figure(figsize=(16, 8))
# plt.plot(
#     data['result_day'],
#     data['prize_pool'],
#     c='blue',
#     linewidth=2
# )
# plt.xlabel("history years(year)")
# plt.ylabel("prize_pool (Billion)")
# plt.show()

# ä¿®æ”¹æ¨ªåæ ‡åˆ»åº¦å¯†åº¦çš„æ–¹æ³• 1
# é€šè¿‡ä¿®æ”¹tick_spacingçš„å€¼å¯ä»¥ä¿®æ”¹xè½´çš„å¯†åº¦
# fig, ax = plt.subplots(1,1)
# ax.plot(data['result_day'],data['prize_pool'])
# ax.xaxis.set_major_locator(ticker.MultipleLocator(10000))
# plt.xlabel("history years(year)")
# plt.ylabel("prize_pool (Billion)")
# plt.show()

# ä¿®æ”¹æ¨ªåæ ‡åˆ»åº¦å¯†åº¦çš„æ–¹æ³• 2
plt.figure(figsize=(16, 8))
plt.plot(
    data['result_day'],
    data['prize_pool'],
    c='blue',
    linewidth=2
)
plt.xlabel("history years(year)")
plt.ylabel("prize_pool (Billion)")
x_major_locator=MultipleLocator(200)
#æŠŠxè½´çš„åˆ»åº¦é—´éš”è®¾ç½®ä¸º10000ï¼Œå¹¶å­˜åœ¨å˜é‡é‡Œ
y_major_locator=MultipleLocator(500000000)
#æŠŠyè½´çš„åˆ»åº¦é—´éš”è®¾ç½®ä¸º500000000ï¼Œå¹¶å­˜åœ¨å˜é‡é‡Œ
ax=plt.gca()
#axä¸ºä¸¤æ¡åæ ‡è½´çš„å®ä¾‹
#x_major_locator.MAXTICKS = 1500

ax.xaxis.set_major_locator(x_major_locator)
#æŠŠxè½´çš„ä¸»åˆ»åº¦è®¾ç½®ä¸º1çš„å€æ•°
ax.yaxis.set_major_locator(y_major_locator)
#æŠŠyè½´çš„ä¸»åˆ»åº¦è®¾ç½®ä¸º10çš„å€æ•°
#plt.xlim(-0.5,11)
#æŠŠxè½´çš„åˆ»åº¦èŒƒå›´è®¾ç½®ä¸º-0.5åˆ°11ï¼Œå› ä¸º0.5ä¸æ»¡ä¸€ä¸ªåˆ»åº¦é—´éš”ï¼Œæ‰€ä»¥æ•°å­—ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œä½†æ˜¯èƒ½çœ‹åˆ°ä¸€ç‚¹ç©ºç™½
#plt.ylim(-5,110)
#æŠŠyè½´çš„åˆ»åº¦èŒƒå›´è®¾ç½®ä¸º-5åˆ°110ï¼ŒåŒç†ï¼Œ-5ä¸ä¼šæ ‡å‡ºæ¥ï¼Œä½†æ˜¯èƒ½çœ‹åˆ°ä¸€ç‚¹ç©ºç™½
plt.show()

```
**19å¹´è¿™ä¸ªè¶‹åŠ¿æ˜¯ä»€ä¹ˆé¬¼é€ æˆçš„å‘¢ï¼Ÿ**

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8b2hbibz9j30qc0dn3ym.jpg)

> å½©æ°‘ä»¬åœ¨14å¹´ä»¥åä¹°å½©ç¥¨çš„çƒ­æƒ…é€æ¸æå‡ä¸€ç›´ç–¯ç‹‚åˆ°2018å¹´åº•è¿‘75äº¿ï¼Œä½†æ˜¯è¿›å…¥2019å¹´ç›´çº¿ä¸‹é™ï¼Œéš¾é“æ˜¯å’Œæˆ‘ä¸€æ ·è¢«ğŸ ï¼Ÿ
> 


* æ´¾å‘çš„å¥–é‡‘è¿™äº›å¹´æ€ä¹ˆå˜åŒ–çš„å‘¢ï¼Ÿ


```python
plt.figure(figsize=(16, 8))
plt.plot(
    data['result_day'],
    data['total_bet_amount'],
    c='blue',
    linewidth=2
)
plt.xlabel("history years(year)")
plt.ylabel("total_bet_amount (Billion)")
x_major_locator=MultipleLocator(200)
y_major_locator=MultipleLocator(50000000)
ax=plt.gca()
ax.xaxis.set_major_locator(x_major_locator)
ax.yaxis.set_major_locator(y_major_locator)
plt.show()
```


![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8b2hb184oj30qc0dndg1.jpg)

> å¯¹æˆ‘ä»¬è¶Šæ¥çº¦å¥½äº†ï¼Œæ´¾å‘é¢ä¸€å¹´æ¯”ä¸€å¹´æ›´é«˜åŸºæœ¬å‘ˆç›´çº¿åŒ€é€Ÿå¢é•¿è‡³30äº¿å·¦å³



* ä¸€ç­‰å¥–å¥–é‡‘åˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿ


```python
plt.figure(figsize=(16, 8))
plt.scatter(
    data['result_day'],
    data['first_prize'],
    c='green'
)
plt.xlabel("history years(year)")
plt.ylabel("first_prize (Ten million
)")
x_major_locator=MultipleLocator(200)
y_major_locator=MultipleLocator(5000000)
ax=plt.gca()
ax.xaxis.set_major_locator(x_major_locator)
ax.yaxis.set_major_locator(y_major_locator)
plt.show()
```


![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8b2haiajtj30qc0dnglq.jpg)

> å¥½ç¨³å®šå•Š åŸºæœ¬åœ¨500-1000ä¸‡ä¹‹é—´ è¶…å¤§å¥–å¾ˆå°‘



* æ¯ä¸ªåŒºå„ä¸ªçƒå·å‡ºç°çš„æ¦‚ç‡æ˜¯æ€æ ·çš„å‘¢ï¼Ÿ

```python
# å¯¹è¯¥åˆ—åšgroup by åˆ†ææ¯ä¸ªå·å‡ºç°çš„æ¬¡æ•° count
resrult_bef1 = data.groupby('resrult_bef1').size()
type(resrult_bef1) # Series
resrult_bef1.index
```




    Int64Index([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,
                18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 29, 30],
               dtype='int64', name='resrult_bef1')




```python
resrult_bef1.values
```




    array([277, 211, 226, 156, 165, 144, 129,  87,  77,  77,  60,  51,  42,
            46,  30,  27,  13,  16,  17,  12,  14,   8,   5,   4,   1,   2,
             1,   2,   1])




```python
resrult_bef1
```




    resrult_bef1
    1     277
    2     211
    3     226
    4     156
    5     165
    6     144
    7     129
    8      87
    9      77
    10     77
    11     60
    12     51
    13     42
    14     46
    15     30
    16     27
    17     13
    18     16
    19     17
    20     12
    21     14
    22      8
    23      5
    24      4
    25      1
    26      2
    27      1
    29      2
    30      1
    dtype: int64




```python
fig, axes = plt.subplots(1, 1)
bef1 = pd.Series(resrult_bef1)
bef1.plot.bar(ax=axes, color='green', alpha=0.8,figsize=(16,8))
# data.plot.barh(ax=axes[1], color='k', alpha=0.7)

```

å‰åŒº1ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8b2kbr1ytj30q00djjr8.jpg)


```python
data = pd.read_csv('/Users/lianxiaobao/lianxiaobao/bigdatabook/daletou4.csv')
resrult_bef2 = data.groupby('resrult_bef2').size()
fig, axes = plt.subplots(1, 1)
bef2 = pd.Series(resrult_bef2)
bef2.plot.bar(ax=axes, color='green', alpha=0.8,figsize=(16,8))
```

å‰åŒº2:

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8b2kbbkz3j30q00dj3yd.jpg)

* å°±ä¸å†ä¸€ä¸€ä¸¾ä¾‹æœ€å7ä¸ªåŒºç»Ÿè®¡ç»“æœä¸º

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8b0pz8ukoj30u00z1gqk.jpg)


æ€»ç»“ä¸€ä¸‹ï¼š

ä¸­å¤§å¥–çœŸçš„å¹¸ç¦ï¼Œå¤ªéš¾äº†